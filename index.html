<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>üç≥ Recipe Finder</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background:#f7f9fc;
      color:#2f3e3c;
      text-align:center;
    }
    header {
      background:#1A3636;
      color:white;
      padding:15px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    header h1 { margin:0; font-size:22px; }
    nav button {
      background:white;
      color:#1A3636;
      border:none;
      margin-left:10px;
      padding:8px 16px;
      border-radius:6px;
      cursor:pointer;
      font-weight:600;
      transition:0.2s;
    }
    nav button:hover { background:#d0dbd8; }

    .container { padding:20px; max-width:1100px; margin:auto; }

    input, select, button {
      padding:10px;
      border-radius:6px;
      border:1px solid #ccc;
      font-size:14px;
    }
    button {
      background:#1A3636;
      color:white;
      font-weight:bold;
      cursor:pointer;
      border:none;
    }
    button:hover { background:#2d4d4d; }

    /* Center Search Section */
    #searchSection {
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      margin-top:20px;
    }
    #searchSection input { width:300px; }

    .results {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(250px,1fr));
      gap:15px;
      margin-top:20px;
    }
    .card {
      background:white;
      border-radius:12px;
      box-shadow:0 2px 6px rgba(0,0,0,0.08);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      transition:transform 0.3s ease, box-shadow 0.3s ease;
      animation:fadeIn 0.6s ease;
    }
    .card:hover {
      transform:translateY(-6px);
      box-shadow:0 6px 16px rgba(0,0,0,0.15);
    }
    .card img {
      width:100%;
      height:160px;
      object-fit:cover;
    }
    .card h3 { margin:10px; font-size:18px; color:#333; }
    .card p { margin:0 10px 10px; font-size:14px; color:#555; }
    .card button {
      margin:10px;
      background:#1A3636;
      color:white;
      border-radius:6px;
    }
    .card button:hover { background:#2d4d4d; }

    #detailsOverlay {
      display:none;
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.6);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:10;
    }
    #detailsCard {
      background:white;
      padding:20px;
      border-radius:12px;
      width:500px;
      max-height:90vh;
      overflow:auto;
      box-shadow:0 4px 12px rgba(0,0,0,0.2);
      animation:fadeIn 0.5s ease;
    }
    #detailsCard img { max-width:100%; border-radius:10px; }

    /* Profile Page Styling */
    .profile-container {
      max-width:600px;
      margin:30px auto;
      background:white;
      border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      padding:30px;
      text-align:left;
      animation:fadeIn 0.6s ease;
    }
    .profile-header {
      display:flex;
      align-items:center;
      gap:20px;
    }
    .profile-header img {
      width:90px;
      height:90px;
      border-radius:50%;
      object-fit:cover;
      border:3px solid #1A3636;
    }
    .profile-info {
      margin-top:20px;
    }
    .profile-info p {
      margin:8px 0;
      font-size:15px;
    }
    .edit-btn {
      margin-top:20px;
      display:block;
      padding:10px 20px;
      border-radius:6px;
      font-weight:600;
      background:#1A3636;
      color:white;
    }
    .edit-btn:hover {
      background:#2d4d4d;
    }
    .hidden { display:none; }

    @keyframes fadeIn {
      from { opacity:0; transform:translateY(10px); }
      to { opacity:1; transform:translateY(0); }
    }
  </style>
</head>
<body>

<header>
  <h1>üç≥ Recipe Finder</h1>
  <nav>
    <button onclick="showHome()">Home</button>
    <button onclick="showProfile()">Profile</button>
  </nav>
</header>

<!-- HOME PAGE -->
<div id="homePage" class="container">
  <h2>Find Recipes by Ingredients</h2>
  <div id="searchSection">
    <input type="text" id="ingredients" placeholder="e.g. chicken, tomato, onion">
    <button onclick="searchRecipes()">Search</button>
  </div>

  <h2>Recommended Recipes</h2>
  <div id="recommendations" class="results"></div>

  <h2>Search Results</h2>
  <div id="results" class="results"></div>

  <h2>üî• Trending Recipes</h2>
  <div id="trending" class="results"></div>
</div>

<!-- Recipe Details Modal -->
<div id="detailsOverlay" onclick="closeDetails(event)">
  <div id="detailsCard"></div>
</div>

<!-- PROFILE PAGE -->
<div id="profilePage" class="container hidden">
  <h2>üë§ Your Profile</h2>

  <!-- Auth Section -->
  <div class="profile-container" id="authBox">
    <h3>Sign In / Sign Up</h3>
    <input type="text" id="username" placeholder="Username"><br><br>
    <input type="password" id="password" placeholder="Password"><br><br>
    <button onclick="signIn()">Sign In</button>
  </div>

  <!-- Profile Info -->
  <div class="hidden" id="infoBox">
    <div id="personalForm" class="profile-container hidden">
      <h3>Edit Your Profile</h3>
      <input type="text" id="fullname" placeholder="Full Name"><br><br>
      <input type="email" id="email" placeholder="Email"><br><br>
      <input type="number" id="age" placeholder="Age"><br><br>
      <select id="gender">
        <option value="">Select Gender</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select><br><br>
      <input type="text" id="diet" placeholder="Diet Preference (e.g. Vegan)"><br><br>
      <input type="text" id="cuisine" placeholder="Favorite Cuisine"><br><br>
      <input type="text" id="allergies" placeholder="Allergies (comma separated)"><br><br>
      <button onclick="saveInfo()">Save Info</button>
    </div>

    <!-- Profile Display -->
    <div id="personalInfo" class="profile-container"></div>
  </div>
</div>

<script>
const API_KEY = "849bee6e6b3346288f761d8bd9930aa9"; 

// NAVIGATION
function showHome(){
  document.getElementById("homePage").classList.remove("hidden");
  document.getElementById("profilePage").classList.add("hidden");
}
function showProfile(){
  document.getElementById("profilePage").classList.remove("hidden");
  document.getElementById("homePage").classList.add("hidden");
}

// SIGN IN
function signIn(){
  const user = document.getElementById("username").value.trim();
  const pass = document.getElementById("password").value.trim();
  if(user && pass){
    localStorage.setItem("user", user);
    document.getElementById("authBox").classList.add("hidden");
    document.getElementById("infoBox").classList.remove("hidden");
    loadInfo();
  } else {
    alert("Enter username and password!");
  }
}

// SAVE PERSONAL INFO
function saveInfo(){
  const info = {
    name: document.getElementById("fullname").value.trim(),
    email: document.getElementById("email").value.trim(),
    age: document.getElementById("age").value.trim(),
    gender: document.getElementById("gender").value,
    diet: document.getElementById("diet").value.trim(),
    cuisine: document.getElementById("cuisine").value.trim(),
    allergies: document.getElementById("allergies").value.trim()
  };
  if(!info.name || !info.email){ alert("Fill in required fields"); return; }
  localStorage.setItem("profileInfo", JSON.stringify(info));
  displayInfo(info);
  document.getElementById("personalForm").classList.add("hidden");
}

// LOAD INFO
function loadInfo(){
  const info = JSON.parse(localStorage.getItem("profileInfo"));
  if(info){ displayInfo(info); }
}

// DISPLAY INFO
function displayInfo(info){
  const box = document.getElementById("personalInfo");
  box.classList.remove("hidden");

  box.innerHTML = `
    <div class="profile-header">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile">
      <div>
        <h2>${info.name || "Your Name"}</h2>
        <p>${info.email || ""}</p>
      </div>
    </div>
    <div class="profile-info">
      <p><b>Age:</b> ${info.age || "N/A"}</p>
      <p><b>Gender:</b> ${info.gender || "N/A"}</p>
      <p><b>Diet:</b> ${info.diet || "N/A"}</p>
      <p><b>Favorite Cuisine:</b> ${info.cuisine || "N/A"}</p>
      <p><b>Allergies:</b> ${info.allergies || "N/A"}</p>
    </div>
    <button class="edit-btn" onclick="editProfile()">‚úèÔ∏è Edit Profile</button>
  `;
}

// EDIT PROFILE
function editProfile(){
  const info = JSON.parse(localStorage.getItem("profileInfo")) || {};
  document.getElementById("fullname").value = info.name || "";
  document.getElementById("email").value = info.email || "";
  document.getElementById("age").value = info.age || "";
  document.getElementById("gender").value = info.gender || "";
  document.getElementById("diet").value = info.diet || "";
  document.getElementById("cuisine").value = info.cuisine || "";
  document.getElementById("allergies").value = info.allergies || "";

  document.getElementById("personalForm").classList.remove("hidden");
}

// SEARCH RECIPES
async function searchRecipes(){
  const ingredients = document.getElementById("ingredients").value.trim();
  if(!ingredients){ alert("Enter ingredients"); return; }

  const url = `https://api.spoonacular.com/recipes/findByIngredients?ingredients=${encodeURIComponent(ingredients)}&number=12&apiKey=${API_KEY}`;

  document.getElementById("results").innerHTML = "<p>Loading...</p>";

  try {
    const res = await fetch(url);
    const data = await res.json();
    renderResults(data, "results");
  } catch(err){
    document.getElementById("results").innerHTML = "";
  }
}

// RECOMMENDATIONS
async function loadRecommendations(){
  const url = `https://api.spoonacular.com/recipes/random?number=4&apiKey=${API_KEY}`;
  try {
    const res = await fetch(url);
    const data = await res.json();
    renderResults(data.recipes, "recommendations");
  } catch(err){
    document.getElementById("recommendations").innerHTML = ""; 
  }
}

// TRENDING
async function loadTrending(){
  const url = `https://api.spoonacular.com/recipes/random?number=6&tags=popular&apiKey=${API_KEY}`;
  try {
    const res = await fetch(url);
    const data = await res.json();
    renderResults(data.recipes, "trending");
  } catch(err){
    document.getElementById("trending").innerHTML = ""; 
  }
}

// RENDER RESULTS
function renderResults(recipes, targetId){
  const results = document.getElementById(targetId);
  results.innerHTML = "";
  if(!recipes || !recipes.length){ return; }

  recipes.forEach(r => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${r.image}" alt="${r.title}">
      <h3>${r.title}</h3>
      <button onclick="getRecipeDetails(${r.id})">View Details</button>
    `;
    results.appendChild(card);
  });
}

// GET RECIPE DETAILS
async function getRecipeDetails(id){
  const url = `https://api.spoonacular.com/recipes/${id}/information?includeNutrition=false&apiKey=${API_KEY}`;
  const overlay = document.getElementById("detailsOverlay");
  const card = document.getElementById("detailsCard");
  card.innerHTML = "<p>Loading...</p>";
  overlay.style.display = "flex";

  try {
    const res = await fetch(url);
    const recipe = await res.json();
    let ingredientsList = recipe.extendedIngredients.map(i => `<li>${i.original}</li>`).join("");
    card.innerHTML = `
      <h2>${recipe.title}</h2>
      <img src="${recipe.image}">
      <p><b>Ready in:</b> ${recipe.readyInMinutes} mins</p>
      <p><b>Servings:</b> ${recipe.servings}</p>
      <h3>Ingredients</h3>
      <ul>${ingredientsList}</ul>
      <h3>Instructions</h3>
      <p>${recipe.instructions || "No instructions provided."}</p>
      <button onclick="closeDetails()">Close</button>
    `;
  } catch(err){
    card.innerHTML = "<p>No details available.</p>";
  }
}

// CLOSE DETAILS
function closeDetails(e){
  if(e && e.target.id !== "detailsOverlay" && e.target.tagName !== "BUTTON") return;
  document.getElementById("detailsOverlay").style.display = "none";
}

// Load recommendations + trending on startup
loadRecommendations();
loadTrending();
</script>
</body>
</html>
